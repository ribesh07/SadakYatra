"use client";var W=Object.defineProperty;var Z=(t,s,e)=>s in t?W(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var g=(t,s,e)=>(Z(t,typeof s!="symbol"?s+"":s,e),e);import u,{useCallback as L,useEffect as x,useMemo as M,useState as y}from"react";var b=class{constructor(){g(this,"toasts");g(this,"subscribers");this.toasts=[],this.subscribers=[]}subscribe(s){return this.subscribers=[...this.subscribers,s],()=>{this.subscribers.splice(this.subscribers.indexOf(s),1)}}publish(s){this.subscribers.forEach(e=>e(s))}add(s,e){let r={id:this.toasts.length,state:"enter",type:e,title:s};return this.toasts=[...this.toasts,r],this.publish(r),r}update(s){let e=this.toasts.findIndex(r=>r.id===s.id);this.toasts[e]=s,this.publish(s)}},a=new b;import S from"react";function T(t,{insertAt:s}={}){if(!t||typeof document=="undefined")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}T(`.toast-bottom-enter{animation:enterAnimationBottom .35s cubic-bezier(.21,1.02,.73,1) forwards}.toast-bottom-leave{animation:leaveAnimationBottom .4s cubic-bezier(.06,.71,.55,1) forwards}.toast-top-enter{animation:enterAnimationTop .35s cubic-bezier(.21,1.02,.73,1) forwards}.toast-top-leave{animation:leaveAnimationTop .4s cubic-bezier(.06,.71,.55,1) forwards}.loading-icon{width:16px;height:16px;margin-right:4px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:#e0e0e0;border-right-color:#111827;animation:rotateAnimation 1s linear infinite}@keyframes enterAnimationBottom{0%{transform:translate3d(0,200%,0) scale(.6);opacity:.5}to{transform:translateZ(0) scale(1);opacity:1}}@keyframes leaveAnimationBottom{0%{transform:translateZ(-1px) scale(1);opacity:1}to{transform:translate3d(0,150%,-1px) scale(.6);opacity:0}}@keyframes enterAnimationTop{0%{transform:translate3d(0,-200%,0) scale(.6);opacity:.5}to{transform:translateZ(0) scale(1);opacity:1}}@keyframes leaveAnimationTop{0%{transform:translateZ(-1px) scale(1);opacity:1}to{transform:translate3d(0,-150%,-1px) scale(.6);opacity:0}}@keyframes rotateAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);import m from"react";var I=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20","data-testid":"success-icon"},m.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),w=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20","data-testid":"error-icon"},m.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),z=m.createElement("div",{className:"loading-icon","data-testid":"loading-icon"});var A=S.memo(({toast:t,position:s})=>{let e=t.theme==="light"?"rgb(243, 244, 246)":"rgb(17, 24, 39)",r=t.theme==="light"?"rgb(17, 24, 39)":"rgb(243, 244, 246)",n=s.startsWith("top");return S.createElement("div",{className:`toast-${n?"top":"bottom"}-${t.state} ${t.className}`,style:{paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",borderRadius:"0.375rem",backgroundColor:e,fontWeight:500,fontSize:"0.875rem",lineHeight:"1.25rem",color:r,zIndex:n?9999-t.zIndex:t.zIndex,display:"flex",gap:4,minWidth:220,position:"relative",alignItems:"center",...t.style},key:t.id},t.type==="success"&&I,t.type==="error"&&w,t.type==="loading"&&z,t.title)});var $=({position:t="bottom-right",duration:s=3e3,theme:e="light",options:r})=>{let[n,f]=y([]),[k,B]=y({}),[C,P]=y(0);x(()=>{let o=a.subscribe(i=>{f(d=>{var l=d.findIndex(h=>h.id===i.id);if(l===-1)return[...d,i];var c=[...d];return c[l]=i,c}),N(i)});return()=>{o()}},[]),x(()=>{let[o,i]=t.split("-");B({[o]:0,[i]:0})},[t]),x(()=>{P(n.length*41)},[n]);function N(o){setTimeout(()=>v(o,"idle"),300),o.type!=="loading"&&(setTimeout(()=>v(o,"leave"),s-100),setTimeout(()=>E(o),s))}function v(o,i){f(d=>{var l=d.slice(),c=l.findIndex(h=>h.id===o.id);return l[c]={...l[c],state:i},l})}let E=L(o=>f(i=>i.filter(d=>d.id!==o.id)),[]),p=t.startsWith("top"),j=M(()=>p?n.slice().reverse():n,[p,n]);return u.createElement("section",{style:{position:"fixed",zIndex:9999,display:"flex",flexDirection:"column",gap:5,margin:16,transform:"translateY(0)",height:C,transition:"all 230ms cubic-bezier(.21, 1.02, .73, 1)",...k}},!p&&u.createElement("div",{className:"flex h-full w-full grow"}),j.map((o,i)=>u.createElement(A,{key:o.id,toast:{...o,zIndex:i,theme:e,...r,...r==null?void 0:r[o.type]},position:t})),p&&u.createElement("div",{className:"flex h-full w-full grow"}))};var H=(t,s)=>{var e=a.add(s.loading,"loading");return t().then(r=>(e.type="success",e.title=s.success,e.state="idle",a.update(e),r),r=>(e.type="error",e.title=s.error,e.state="idle",a.update(e),Promise.reject(r)))},O=t=>{a.add(t,"success")},D=t=>{a.add(t,"error")},F=t=>{a.add(t,"default")},Y=Object.assign(F,{success:O,error:D,promise:H});export{$ as Toaster,Y as toast};
//# sourceMappingURL=index.mjs.map